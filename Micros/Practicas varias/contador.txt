;descarga de atmelstudio para win xp (hhtps://www.dropbox.com/sh/00x82cgnrsip8v9/Z4EN9IADHW)
/*
 * Assembler_comtador1.asm
 *
	 *  Created: 20/02/2014 12:54:57 a.m.
 *   Author: edescom													
 */ 

	.INCLUDE "M8535DEF.INC"		;LIBRERÍA PARA EL MODELO DEL MICRO
	.CSEG		
	.ORG	$0					;DIRECCIÓN DE INICIO DE MEMORIA
	RJMP	INICIO				;SALTA A LA ETIQUETA INICIO
	.ORG	$015				
 INICIO:
	LDI		R16,	LOW(RAMEND)	;PONE EN BAJO LA ULTIMA DIRECCIÓN DE LA MEMORIA RAM
	OUT		SPL,	R16			
	LDI		R16,	HIGH(RAMEND);PONE EN ALTO LA ÚLTIMA DIRECCIÓN DE LA MEMORIA RAM
	OUT		SPL,	R16		 
	LDI		R16,	$FF			;SE LE ASIGNA EL VALOR $FF A R16 = 1111 1111 ESTO QUIERE DECIR QUE SE DEFINIRA TODO EL PUERTO B(8 BITS) COMO SALIDA
	;SER	R16     SE PUEDE PONER EN LUGAR DE "LDI  R16 $FF" YA QUE AUTOMÁTICAMENTE LE PASA EL VALOR DE $FF AL REGISTRO SOLO ESE VALOR NO SE PUEDE CAMBIAR
	OUT		DDRB,	R16			;MANDA EL VALOR DE R16 A DDRB AQUÍ SE DEFINEN SI LOS PUERTOS SERÁN ESTRADAS = 0 O SALIDAS = 1
	LDI		R16,	$00			;SE LE DA VALOR DE INICIO PARA LA SALIDA AL PUERTO B QUE SERÁ $00 = 0000 0000
LOOP:
	OUT		PORTB,	R16			;MANDA EL VALOR DE R16 AL PUERTO B
DELAY:
	DEC		R20					;SE VA DECREMENTANDO EL VALOR DEL REGISTRO HASTA QUE SEA IGUAL A CERO
	BRNE	DELAY
	DEC		R21					;SE DECREMENTA EL VALOR DEL REGISTRO HSATA QUE SEA IGUAL A CERO
	BRNE	DELAY				
	INC		R16					;INCREMENTA R16
	RJMP	LOOP				;SALTA A ETIQUETA LOOP